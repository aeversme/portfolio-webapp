{% extends 'base.html' %}
{% import "bootstrap/wtf.html" as wtf %}

{% block title %}
Blog Post
{% endblock %}

{% block content %}
<div class="jumbotron jumbotron-fluid" style="background-image: url({{ blog_post.img_url }})">
    <div class="jumbo-overlay"></div>
    <div class="container">
        <div class="jumbo-title text-center">
            <h1 class="big-heading">{{ blog_post.title }}</h1>
            <p class="subheading">{{ blog_post.subtitle }}</p>
        </div>
    </div>
</div>
<div class="container">
    <div class="row">
        <div class="col-lg-8 col-md-10 mx-auto">
            {{ blog_post.body|safe }}
            <span class="post-meta">Posted by {{ blog_post.author.name }} on {{ blog_post.date }}</span>
            <hr>
            <div class="col-lg-8 col-md-10 mx-auto comment">
                <ul class="comment-list">
                    {% for comment in blog_post.comments %}
                        <li>
                            <div class="commenter-image">
                                <img src="{{ comment.comment_author.email | gravatar }}"/>
                            </div>
                            <div class="comment-text">
                                <p>{{ comment.text|safe }}</p>
                                <span class="comment-meta">{{ comment.comment_author.name }}</span>
                            </div>
                        </li>
                    {% endfor %}
                </ul>
            </div>
            <div class="clearfix">
                {% if current_user.id == 1 %}
                    <a class="btn custom float-right" href="{{url_for('edit_post', post_id=blog_post.id)}}">Edit Post</a>
                {% endif %}
                <br>
                {{ ckeditor.load() }}
                {{ ckeditor.config(name='comment') }}
                <form action="" method="post" class="form" role="form">
                    {{ form.csrf_token }}
                    {{ wtf.form_field(form.comment) }}
                    <button type="submit" class="btn custom"><i class="fas fa-comments"></i> Submit Comment</button>
                </form>
            </div>
        </div>

    </div>
</div>

{% endblock %}